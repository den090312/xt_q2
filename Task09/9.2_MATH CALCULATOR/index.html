<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>MATH CALCULATOR</title>
	</head>
	<body style="padding: 25px;">
		<input type="text" id="inputString" placeholder="Введите арифметическое выражение" value="" style="width: 500px;">
		<br>
		<br>
		<input type="button" value="Посчитать" onclick="PrintResult()">
		<br>
		<br>		
		<input type="text" id="outputString" placeholder="Результат" style="width: 500px;" readonly = true;>
	</body>
</html>

<script>

function PrintResult()
{
	var output = document.getElementById("outputString");
	output.value = "";

	ExpressionIsCorrect() ? output.value = GetResult() : alert("Expression is not correct!");  	
}

function ExpressionIsCorrect() 
{
	return document.getElementById("inputString").value.match(/^((\s*(\d+(\.\d)*)\s*)*(\s*[+\-*/]\s*)*)+=$/g);
}	

function GetResult()
{
	var inputString = document.getElementById("inputString").value;

	inputString = inputString.split(' ').filter(element => element != '').join("");

	if (IsOperator(inputString[0])) 
	{
		inputString = "0" + inputString;
	}
	
	var result = 0;

	if (IsNumber(inputString[inputString.length - 2])) 
	{
		inputString = inputString.slice(0, -1) + inputString[inputString.length - 3] + "=";
	}
	else
	{
		result = Number(numbers[0]);	
	}

	var numbers = inputString.match(/\d+(\.\d)*/g);
	var operators = inputString.match(/[+\-*/]/g);

	if (operators == null)
	{
		return numbers[0];	
	}

	loopLength = GetLoopLength(numbers.length, operators.length);

	var i = 0;

	for (var i = 0; i < loopLength; i++)
	{
		result = OperationResult(result, numbers[i], operators[i]);
	}

	return result; 
}

function IsOperator(inputChar)
{
	return inputChar.match(/[+\-*/]/g) != null;	
}

function IsNumber(inputChar)
{
	return inputChar.match(/\d+(\.\d)*/g) != null;	
}

function GetLoopLength(numbersLength, operatorsLength) 
{
	return numbersLength > operatorsLength ? numbersLength : operatorsLength;   
}

function OperationResult(result, number, operator) 
{
	switch (operator) 
	{
		case "+":
			return result + Number(number);		
		case "-":
			return result - Number(number);		
		case "*":
			return result * Number(number);		
		case "/":
			return result / Number(number);	
	}
}
	
</script>
