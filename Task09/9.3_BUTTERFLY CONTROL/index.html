<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>BUTTERFLY CONTROL</title>
		<link rel="stylesheet" href="styles.css">
	</head>
	<body style="padding: 25px;">
		<div id="butterfly1">
			<div class="available">
				<b>Available</b>
				<br>
				<select multiple>
					<option>Option 1</option>
					<option>Option 2</option>
					<option>Option 3</option>
					<option>Option 4</option>
					<option>Option 5</option>
				</select>
			</div>
			<div class="arrow_block">
				<div class="arrow">
					<input type="button" class="arrow_fullright" onclick="MoveFullRight(this)" value=">>" />	
				</div>
				<div class="arrow">
					<input type="button" class="arrow_right" onclick="MoveSelectedRight(this)" value=">" />	
				</div>
				<div class="arrow">
					<input type="button" class="arrow_left" onclick="MoveSingleLeft(this)" value="<" />	
				</div>
				<div class="arrow">
					<input type="button" class="arrow_fullleft" onclick="MoveFullLeft(this)" value="<<" />	
				</div>	
			</div>
			<div class="selected">
				<b>Selected</b>
				<br>
				<select multiple>

				</select>
			</div>			
			</select>
		</div>
	</body>
</html>

<script>

function MoveFullRight(obj)
{
	var availableSelect = GetDivElement(obj, "available").getElementsByTagName("select")[0]; 
	var selectedSelect = GetDivElement(obj, "selected").getElementsByTagName("select")[0];
	var length = availableSelect.options.length; 

	if (length > 0)
	{
		CleanSelectbox(selectedSelect);
		CleanSelectbox(availableSelect);
		AddAllToSelectbox(selectedSelect, length);
	}
} 

function MoveFullLeft(obj)
{
	var availableSelect = GetDivElement(obj, "available").getElementsByTagName("select")[0]; 
	var selectedSelect = GetDivElement(obj, "selected").getElementsByTagName("select")[0];
	var length = selectedSelect.options.length; 

	if (length > 0)
	{
		CleanSelectbox(availableSelect);
		CleanSelectbox(selectedSelect);
		AddAllToSelectbox(availableSelect, length);	
	}
} 

function MoveSelectedRight(obj)
{
	var availableSelect = GetDivElement(obj, "available").getElementsByTagName("select")[0]; 

	if (SelectExists(availableSelect))
	{
		var options = GetSelectedOptions(availableSelect);
		var selectedSelect = GetDivElement(obj, "selected").getElementsByTagName("select")[0];

		AddOptions(options, selectedSelect);
		RemoveOptions(options, availableSelect);
	}
	else
	{
		alert("No options selected!");
	}
} 

function MoveSelectedLeft(obj)
{
	var selectedSelect = GetDivElement(obj, "selected").getElementsByTagName("select")[0]; 

	if (SelectExists(selectedSelect))
	{
		var options = GetSelectedOptions(selectedSelect);
		var availableSelect = GetDivElement(obj, "available").getElementsByTagName("select")[0];

		AddOptions(options, availableSelect);
		RemoveOptions(options, availableSelect);	
	}
	else
	{
		alert("No options selected!");
	}
} 

function AddOptions(options, selectbox)
{
	for (let option of options)
	{
		var newOption = document.createElement("option");

		newOption.innerHTML = option;
		selectbox.appendChild(newOption);
	}
}

function RemoveOptions(options, selectObject)
{
	for (var i = 0; i < selectObject.length; i++) 
	{
		var value = selectObject.options[i].value; 

		if (options.includes(value))
		{
			selectObject.remove(i);
		}
	}
}

function GetSelectedOptions(selectbox)
{
    var selectedOptions = [];

    for (var i = 0; i < selectbox.length; i++) 
	{
        var option = selectbox.options[i];

		if (option.selected) 
		{
			selectedOptions.push(option.value);
		}
    }

	return selectedOptions; 
} 

function SelectExists(selectbox)
{
	return selectbox.selectedIndex != -1;
}

function GetDivElement(obj, className)
{
	var butterfly = obj.parentNode.parentNode.parentNode;

	for (let child of butterfly.children)
	{
		if (child.className == className)
		{
			return child;  
		}
	}	
}

function CleanSelectbox(selectbox)
{
	do
	{
		selectbox.remove(0);
	}
	while (selectbox.options.length > 0);
} 

function AddAllToSelectbox(selectbox, length)
{
	for (var i = 1; i <= length; i++)
	{
		AddNewOption(selectbox, i);	
	} 
}

function AddNewOption(selectbox, i)
{
	var option = document.createElement("option");

	option.value = "Option " + i;
	option.innerHTML = "Option " + i;
	
	selectbox.appendChild(option);		
}
	
</script>
